{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nimport 'requestidlecallback';\nimport invariant from 'invariant';\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport useStyles from 'substyle';\nimport { StickContext } from './StickContext';\nimport StickInline from './StickInline';\nimport StickNode from './StickNode';\nimport StickPortal from './StickPortal';\nimport DEFAULT_POSITION from './defaultPosition';\nimport { useAutoFlip, useWatcher } from './hooks';\nimport { getDefaultAlign, getModifiers, scrollX, uniqueId } from './utils';\nvar defaultStyles = {\n  node: {\n    position: 'absolute',\n    zIndex: 99,\n    textAlign: 'left'\n  }\n};\n\nfunction Stick(_ref) {\n  var _ref$inline = _ref.inline,\n      inline = _ref$inline === void 0 ? false : _ref$inline,\n      node = _ref.node,\n      _ref$sameWidth = _ref.sameWidth,\n      sameWidth = _ref$sameWidth === void 0 ? false : _ref$sameWidth,\n      children = _ref.children,\n      _ref$updateOnAnimatio = _ref.updateOnAnimationFrame,\n      updateOnAnimationFrame = _ref$updateOnAnimatio === void 0 ? false : _ref$updateOnAnimatio,\n      position = _ref.position,\n      align = _ref.align,\n      component = _ref.component,\n      transportTo = _ref.transportTo,\n      _ref$autoFlipHorizont = _ref.autoFlipHorizontally,\n      autoFlipHorizontally = _ref$autoFlipHorizont === void 0 ? false : _ref$autoFlipHorizont,\n      _ref$autoFlipVertical = _ref.autoFlipVertically,\n      autoFlipVertically = _ref$autoFlipVertical === void 0 ? false : _ref$autoFlipVertical,\n      onClickOutside = _ref.onClickOutside,\n      style = _ref.style,\n      className = _ref.className,\n      classNames = _ref.classNames,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"inline\", \"node\", \"sameWidth\", \"children\", \"updateOnAnimationFrame\", \"position\", \"align\", \"component\", \"transportTo\", \"autoFlipHorizontally\", \"autoFlipVertically\", \"onClickOutside\", \"style\", \"className\", \"classNames\"]);\n\n  var _useState = useState(0),\n      width = _useState[0],\n      setWidth = _useState[1];\n\n  var _useState2 = useState(function () {\n    return uniqueId();\n  }),\n      containerNestingKeyExtension = _useState2[0];\n\n  var nestingKey = [useContext(StickContext), containerNestingKeyExtension].filter(function (key) {\n    return !!key;\n  }).join('_');\n  var anchorRef = useRef();\n  var nodeRef = useRef();\n\n  var _containerRef = useRef();\n\n  var _useAutoFlip = useAutoFlip(autoFlipHorizontally, autoFlipVertically, position || DEFAULT_POSITION, align || getDefaultAlign(position || DEFAULT_POSITION)),\n      resolvedPosition = _useAutoFlip[0],\n      resolvedAlign = _useAutoFlip[1],\n      checkAlignment = _useAutoFlip[2];\n\n  var styles = useStyles(defaultStyles, {\n    style: style,\n    className: className,\n    classNames: classNames\n  }, getModifiers({\n    position: resolvedPosition,\n    align: resolvedAlign,\n    sameWidth: sameWidth\n  }));\n  useEffect(function () {\n    var handleScroll = function handleScroll() {\n      if (!nodeRef.current || !anchorRef.current) {\n        return;\n      }\n\n      checkAlignment(nodeRef.current, anchorRef.current);\n    };\n\n    handleScroll(); // Check alignment on first render\n\n    window.addEventListener('scroll', handleScroll);\n    return function () {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [checkAlignment]);\n  useEffect(function () {\n    var handleClickOutside = function handleClickOutside(ev) {\n      if (!onClickOutside) {\n        return;\n      }\n\n      var target = ev.target;\n\n      if (target instanceof window.HTMLElement && isOutside(anchorRef, _containerRef, target)) {\n        onClickOutside(ev);\n      }\n    };\n\n    document.addEventListener('click', handleClickOutside, true);\n    return function () {\n      document.removeEventListener('click', handleClickOutside, true);\n    };\n  }, [onClickOutside]);\n  var measure = useCallback(function () {\n    if (!anchorRef.current) {\n      return;\n    }\n\n    var boundingRect = anchorRef.current.getBoundingClientRect();\n    var newWidth = sameWidth ? boundingRect.width : calculateWidth(anchorRef.current, resolvedPosition, resolvedAlign, boundingRect);\n\n    if (newWidth !== width) {\n      setWidth(newWidth);\n    }\n  }, [resolvedAlign, resolvedPosition, sameWidth, width]);\n  useWatcher(measure, {\n    updateOnAnimationFrame: updateOnAnimationFrame,\n    enabled: !!node\n  });\n  var handleReposition = useCallback(function () {\n    if (nodeRef.current && anchorRef.current) {\n      checkAlignment(nodeRef.current, anchorRef.current);\n    }\n  }, [checkAlignment]);\n\n  if (inline) {\n    return /*#__PURE__*/React.createElement(StickContext.Provider, {\n      value: nestingKey\n    }, /*#__PURE__*/React.createElement(StickInline, _extends({}, rest, {\n      position: resolvedPosition,\n      align: resolvedAlign,\n      style: styles,\n      node: node && /*#__PURE__*/React.createElement(StickNode, {\n        width: width,\n        position: resolvedPosition,\n        align: resolvedAlign,\n        sameWidth: sameWidth,\n        ref: nodeRef\n      }, node),\n      nestingKey: nestingKey,\n      containerRef: function containerRef(node) {\n        anchorRef.current = node;\n        _containerRef.current = node;\n      },\n      component: component\n    }), children));\n  }\n\n  return /*#__PURE__*/React.createElement(StickContext.Provider, {\n    value: nestingKey\n  }, /*#__PURE__*/React.createElement(StickPortal, _extends({}, rest, {\n    updateOnAnimationFrame: updateOnAnimationFrame,\n    transportTo: transportTo,\n    component: component,\n    ref: function ref(node) {\n      invariant(!node || node instanceof Element, 'Only HTML elements can be stick anchors.');\n      anchorRef.current = node;\n    },\n    position: resolvedPosition,\n    node: node && /*#__PURE__*/React.createElement(StickNode, {\n      width: width,\n      position: resolvedPosition,\n      align: resolvedAlign,\n      sameWidth: sameWidth,\n      ref: nodeRef\n    }, node),\n    style: styles,\n    nestingKey: nestingKey,\n    containerRef: _containerRef,\n    onReposition: handleReposition\n  }), children));\n}\n\nfunction isOutside(anchorRef, containerRef, target) {\n  if (anchorRef.current && anchorRef.current.contains(target)) {\n    return false;\n  }\n\n  var nestingKey = containerRef.current && containerRef.current.getAttribute('data-sticknestingkey');\n\n  if (nestingKey) {\n    // Find all stick nodes nested inside our own stick node and check if the click\n    // happened on any of these (our own stick node will also be part of the query result)\n    var nestedStickNodes = document.querySelectorAll(\"[data-stickNestingKey^='\" + nestingKey + \"']\");\n    return !nestedStickNodes || !Array.from(nestedStickNodes).some(function (stickNode) {\n      return stickNode.contains(target);\n    });\n  }\n\n  return true;\n}\n\nfunction calculateWidth(anchorRef, position, align, _ref2) {\n  var left = _ref2.left,\n      width = _ref2.width,\n      right = _ref2.right;\n\n  if (!anchorRef) {\n    return 0;\n  }\n\n  invariant(document.documentElement, 'Could not find document root node.');\n  var scrollWidth = document.documentElement.scrollWidth;\n\n  var _position$split = position.split(' '),\n      horizontalPosition = _position$split[1];\n\n  invariant(horizontalPosition === 'left' || horizontalPosition === 'center' || horizontalPosition === 'right', \"Expected horizontal position to be \\\"left\\\", \\\"center\\\", or \\\"right\\\" but got \\\"\" + horizontalPosition + \"\\\".\");\n  var positionAdjustments = {\n    left: left,\n    center: left + width / 2,\n    right: right\n  };\n  var absLeft = scrollX(anchorRef) + positionAdjustments[horizontalPosition];\n\n  if (align.indexOf('left') !== -1) {\n    return scrollWidth - absLeft;\n  }\n\n  if (align.indexOf('right') !== -1) {\n    return absLeft;\n  }\n\n  if (align.indexOf('center') !== -1) {\n    return Math.min(absLeft, scrollWidth - absLeft) * 2;\n  }\n\n  return 0;\n}\n\nexport default Stick;","map":{"version":3,"sources":["/home/gokarna/Desktop/IOE/5th sem/Database Management Systems/project/Main Project/restaurantms/node_modules/react-stick/es/Stick.js"],"names":["_extends","_objectWithoutPropertiesLoose","invariant","React","useCallback","useContext","useEffect","useRef","useState","useStyles","StickContext","StickInline","StickNode","StickPortal","DEFAULT_POSITION","useAutoFlip","useWatcher","getDefaultAlign","getModifiers","scrollX","uniqueId","defaultStyles","node","position","zIndex","textAlign","Stick","_ref","_ref$inline","inline","_ref$sameWidth","sameWidth","children","_ref$updateOnAnimatio","updateOnAnimationFrame","align","component","transportTo","_ref$autoFlipHorizont","autoFlipHorizontally","_ref$autoFlipVertical","autoFlipVertically","onClickOutside","style","className","classNames","rest","_useState","width","setWidth","_useState2","containerNestingKeyExtension","nestingKey","filter","key","join","anchorRef","nodeRef","_containerRef","_useAutoFlip","resolvedPosition","resolvedAlign","checkAlignment","styles","handleScroll","current","window","addEventListener","removeEventListener","handleClickOutside","ev","target","HTMLElement","isOutside","document","measure","boundingRect","getBoundingClientRect","newWidth","calculateWidth","enabled","handleReposition","createElement","Provider","value","ref","containerRef","Element","onReposition","contains","getAttribute","nestedStickNodes","querySelectorAll","Array","from","some","stickNode","_ref2","left","right","documentElement","scrollWidth","_position$split","split","horizontalPosition","positionAdjustments","center","absLeft","indexOf","Math","min"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nimport 'requestidlecallback';\nimport invariant from 'invariant';\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport useStyles from 'substyle';\nimport { StickContext } from './StickContext';\nimport StickInline from './StickInline';\nimport StickNode from './StickNode';\nimport StickPortal from './StickPortal';\nimport DEFAULT_POSITION from './defaultPosition';\nimport { useAutoFlip, useWatcher } from './hooks';\nimport { getDefaultAlign, getModifiers, scrollX, uniqueId } from './utils';\nvar defaultStyles = {\n  node: {\n    position: 'absolute',\n    zIndex: 99,\n    textAlign: 'left'\n  }\n};\n\nfunction Stick(_ref) {\n  var _ref$inline = _ref.inline,\n      inline = _ref$inline === void 0 ? false : _ref$inline,\n      node = _ref.node,\n      _ref$sameWidth = _ref.sameWidth,\n      sameWidth = _ref$sameWidth === void 0 ? false : _ref$sameWidth,\n      children = _ref.children,\n      _ref$updateOnAnimatio = _ref.updateOnAnimationFrame,\n      updateOnAnimationFrame = _ref$updateOnAnimatio === void 0 ? false : _ref$updateOnAnimatio,\n      position = _ref.position,\n      align = _ref.align,\n      component = _ref.component,\n      transportTo = _ref.transportTo,\n      _ref$autoFlipHorizont = _ref.autoFlipHorizontally,\n      autoFlipHorizontally = _ref$autoFlipHorizont === void 0 ? false : _ref$autoFlipHorizont,\n      _ref$autoFlipVertical = _ref.autoFlipVertically,\n      autoFlipVertically = _ref$autoFlipVertical === void 0 ? false : _ref$autoFlipVertical,\n      onClickOutside = _ref.onClickOutside,\n      style = _ref.style,\n      className = _ref.className,\n      classNames = _ref.classNames,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"inline\", \"node\", \"sameWidth\", \"children\", \"updateOnAnimationFrame\", \"position\", \"align\", \"component\", \"transportTo\", \"autoFlipHorizontally\", \"autoFlipVertically\", \"onClickOutside\", \"style\", \"className\", \"classNames\"]);\n\n  var _useState = useState(0),\n      width = _useState[0],\n      setWidth = _useState[1];\n\n  var _useState2 = useState(function () {\n    return uniqueId();\n  }),\n      containerNestingKeyExtension = _useState2[0];\n\n  var nestingKey = [useContext(StickContext), containerNestingKeyExtension].filter(function (key) {\n    return !!key;\n  }).join('_');\n  var anchorRef = useRef();\n  var nodeRef = useRef();\n\n  var _containerRef = useRef();\n\n  var _useAutoFlip = useAutoFlip(autoFlipHorizontally, autoFlipVertically, position || DEFAULT_POSITION, align || getDefaultAlign(position || DEFAULT_POSITION)),\n      resolvedPosition = _useAutoFlip[0],\n      resolvedAlign = _useAutoFlip[1],\n      checkAlignment = _useAutoFlip[2];\n\n  var styles = useStyles(defaultStyles, {\n    style: style,\n    className: className,\n    classNames: classNames\n  }, getModifiers({\n    position: resolvedPosition,\n    align: resolvedAlign,\n    sameWidth: sameWidth\n  }));\n  useEffect(function () {\n    var handleScroll = function handleScroll() {\n      if (!nodeRef.current || !anchorRef.current) {\n        return;\n      }\n\n      checkAlignment(nodeRef.current, anchorRef.current);\n    };\n\n    handleScroll(); // Check alignment on first render\n\n    window.addEventListener('scroll', handleScroll);\n    return function () {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [checkAlignment]);\n  useEffect(function () {\n    var handleClickOutside = function handleClickOutside(ev) {\n      if (!onClickOutside) {\n        return;\n      }\n\n      var target = ev.target;\n\n      if (target instanceof window.HTMLElement && isOutside(anchorRef, _containerRef, target)) {\n        onClickOutside(ev);\n      }\n    };\n\n    document.addEventListener('click', handleClickOutside, true);\n    return function () {\n      document.removeEventListener('click', handleClickOutside, true);\n    };\n  }, [onClickOutside]);\n  var measure = useCallback(function () {\n    if (!anchorRef.current) {\n      return;\n    }\n\n    var boundingRect = anchorRef.current.getBoundingClientRect();\n    var newWidth = sameWidth ? boundingRect.width : calculateWidth(anchorRef.current, resolvedPosition, resolvedAlign, boundingRect);\n\n    if (newWidth !== width) {\n      setWidth(newWidth);\n    }\n  }, [resolvedAlign, resolvedPosition, sameWidth, width]);\n  useWatcher(measure, {\n    updateOnAnimationFrame: updateOnAnimationFrame,\n    enabled: !!node\n  });\n  var handleReposition = useCallback(function () {\n    if (nodeRef.current && anchorRef.current) {\n      checkAlignment(nodeRef.current, anchorRef.current);\n    }\n  }, [checkAlignment]);\n\n  if (inline) {\n    return /*#__PURE__*/React.createElement(StickContext.Provider, {\n      value: nestingKey\n    }, /*#__PURE__*/React.createElement(StickInline, _extends({}, rest, {\n      position: resolvedPosition,\n      align: resolvedAlign,\n      style: styles,\n      node: node && /*#__PURE__*/React.createElement(StickNode, {\n        width: width,\n        position: resolvedPosition,\n        align: resolvedAlign,\n        sameWidth: sameWidth,\n        ref: nodeRef\n      }, node),\n      nestingKey: nestingKey,\n      containerRef: function containerRef(node) {\n        anchorRef.current = node;\n        _containerRef.current = node;\n      },\n      component: component\n    }), children));\n  }\n\n  return /*#__PURE__*/React.createElement(StickContext.Provider, {\n    value: nestingKey\n  }, /*#__PURE__*/React.createElement(StickPortal, _extends({}, rest, {\n    updateOnAnimationFrame: updateOnAnimationFrame,\n    transportTo: transportTo,\n    component: component,\n    ref: function ref(node) {\n      invariant(!node || node instanceof Element, 'Only HTML elements can be stick anchors.');\n      anchorRef.current = node;\n    },\n    position: resolvedPosition,\n    node: node && /*#__PURE__*/React.createElement(StickNode, {\n      width: width,\n      position: resolvedPosition,\n      align: resolvedAlign,\n      sameWidth: sameWidth,\n      ref: nodeRef\n    }, node),\n    style: styles,\n    nestingKey: nestingKey,\n    containerRef: _containerRef,\n    onReposition: handleReposition\n  }), children));\n}\n\nfunction isOutside(anchorRef, containerRef, target) {\n  if (anchorRef.current && anchorRef.current.contains(target)) {\n    return false;\n  }\n\n  var nestingKey = containerRef.current && containerRef.current.getAttribute('data-sticknestingkey');\n\n  if (nestingKey) {\n    // Find all stick nodes nested inside our own stick node and check if the click\n    // happened on any of these (our own stick node will also be part of the query result)\n    var nestedStickNodes = document.querySelectorAll(\"[data-stickNestingKey^='\" + nestingKey + \"']\");\n    return !nestedStickNodes || !Array.from(nestedStickNodes).some(function (stickNode) {\n      return stickNode.contains(target);\n    });\n  }\n\n  return true;\n}\n\nfunction calculateWidth(anchorRef, position, align, _ref2) {\n  var left = _ref2.left,\n      width = _ref2.width,\n      right = _ref2.right;\n\n  if (!anchorRef) {\n    return 0;\n  }\n\n  invariant(document.documentElement, 'Could not find document root node.');\n  var scrollWidth = document.documentElement.scrollWidth;\n\n  var _position$split = position.split(' '),\n      horizontalPosition = _position$split[1];\n\n  invariant(horizontalPosition === 'left' || horizontalPosition === 'center' || horizontalPosition === 'right', \"Expected horizontal position to be \\\"left\\\", \\\"center\\\", or \\\"right\\\" but got \\\"\" + horizontalPosition + \"\\\".\");\n  var positionAdjustments = {\n    left: left,\n    center: left + width / 2,\n    right: right\n  };\n  var absLeft = scrollX(anchorRef) + positionAdjustments[horizontalPosition];\n\n  if (align.indexOf('left') !== -1) {\n    return scrollWidth - absLeft;\n  }\n\n  if (align.indexOf('right') !== -1) {\n    return absLeft;\n  }\n\n  if (align.indexOf('center') !== -1) {\n    return Math.min(absLeft, scrollWidth - absLeft) * 2;\n  }\n\n  return 0;\n}\n\nexport default Stick;"]},"metadata":{},"sourceType":"module"}