"use strict";

exports.__esModule = true;
exports.default = void 0;

var _react = require("react");

function useWatcher(watcher, _ref) {
  var updateOnAnimationFrame = _ref.updateOnAnimationFrame,
      enabled = _ref.enabled;
  (0, _react.useEffect)(function () {
    var animationFrameId;
    var idleCallbackId; // do not track in node

    if (enabled && typeof window.requestAnimationFrame !== 'undefined') {
      var callback = function callback() {
        watcher();

        if (updateOnAnimationFrame) {
          animationFrameId = requestAnimationFrame(callback);
        } else {
          idleCallbackId = requestIdleCallback(callback);
        }
      };

      callback();
    }

    return function () {
      if (animationFrameId) {
        cancelAnimationFrame(animationFrameId);
      }

      if (idleCallbackId) {
        cancelIdleCallback(idleCallbackId);
      }
    };
  }, [updateOnAnimationFrame, watcher, enabled]);
}

var _default = useWatcher;
exports.default = _default;
module.exports = exports.default;